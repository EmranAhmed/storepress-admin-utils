(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{createEventManager:()=>$,createPluginInstance:()=>g,createStorePressPlugin:()=>b,deepMerge:()=>c,escapeRegex:()=>d,findObjectValue:()=>m,getElement:()=>u,getElements:()=>f,getEventsMap:()=>v,getOptionsFromAttribute:()=>p,getPluginInstance:()=>h,getWeakMap:()=>l,swipeEvent:()=>w,testWaitAsync:()=>E,testWaitSync:()=>S,toCamelCase:()=>i,toConstantCase:()=>s,toKebabCase:()=>r,toSnakeCase:()=>o,toUpperCamelCase:()=>a,triggerEvent:()=>y});const n="Utils";function r(e){return e.replace(/([A-Z])/g,(e,t)=>`-${t.toLowerCase()}`).replace(/[-._:~\s]/g,"-").replace(/^-+|-+$/g,"").toLowerCase()}function o(e){return e.replace(/([A-Z])/g,(e,t)=>`_${t.toLowerCase()}`).replace(/[-._:~\s]/g,"_").replace(/^_+|_+$/g,"").toLowerCase()}function s(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/[-._:~\s]+/g,"_").replace(/^_+|_+$/g,"").toUpperCase()}function i(e){return e.replace(/^([a-z])|[-._:~\s](\w)/gi,(e,t,n)=>n?n.toUpperCase():t.toLowerCase())}function a(e){return"storepress"===e.toLowerCase()?"StorePress":e.replace(/^([a-z])|[-._:~\s](\w)/gi,(e,t,n)=>n?n.toUpperCase():t.toUpperCase())}function c(...e){const t={};for(const n of e)for(const e in n)if(n.hasOwnProperty(e)){const r="object"==typeof n[e]&&null!==n[e]&&!Array.isArray(n[e])&&"object"==typeof t[e]&&null!==t[e]&&!Array.isArray(t[e]);t[e]=r?c(t[e],n[e]):n[e]}return t}function l(e){const t=a(e);return window.StorePress=window.StorePress||{},window.StorePress.$weakMaps=window.StorePress.$weakMaps||{},window.StorePress.$weakMaps[t]||(window.StorePress.$weakMaps[t]=new WeakMap),window.StorePress.$weakMaps[t]}function u(e=null){return null===e?null:document===e?document:"string"==typeof e?document.querySelector(e):e instanceof HTMLElement?e:null}function f(e=[]){return 0===e.length?[]:e===document?[document]:"string"==typeof e?document.querySelectorAll(e):e instanceof HTMLElement?[e]:e}function p(e,t,n={}){const r={parseNumber:!0,parseBoolean:!0,truthyStrings:["yes","true"],falsyStrings:["no","false"],parseRegex:!0,...n},o=e=>{if("string"!=typeof e)return e;const t=e.toLowerCase(),n=!1===isNaN(Number(e)),o=new RegExp("^/(.+)/([gimsuyx]*)$").test(e);if(r.parseBoolean){if(r.truthyStrings.includes(t))return!0;if(r.falsyStrings.includes(t))return!1}if(r.parseRegex&&o){const t=e.match(/^\/(.+)\/([gimsuyx]*)$/);try{const[,e,n]=t;return new RegExp(e,n)}catch(t){return console.warn(`Invalid regex pattern: ${e}`,t),e}}return r.parseNumber&&n?Number(e):e},s=(e,t)=>o(t);let a={};const l={...e.dataset},u=i(t),f=l[u];if(f&&f.trim())try{a=((e,t)=>{const n=[e=>e.replaceAll("'",'"'),e=>e.replaceAll("'",'"').replaceAll("\\","\\\\")];for(const r of n)try{return JSON.parse(r(e),t)}catch{}throw new Error("All parsing strategies failed")})(f,s)}catch(e){console.warn(`Failed to parse JSON from "${t}"`,e),a={}}const p=`${u}-`,d=((e,t)=>{const n=e.map((e,t)=>({key:e,index:t})).sort((e,t)=>{const n=(e.key.match(/-/g)||[]).length,r=(t.key.match(/-/g)||[]).length;return n===r?e.index-t.index:n-r}).map(e=>e.key),r={};return n.forEach(e=>{const n=e.split("-");let s="",a="",c=r;n.forEach(e=>{a=a?a+"-"+e:e,a!==e&&(s=i(e),c[s]||(c[s]={value:o(t[a]),child:{}}),c=c[s].child)})}),(e=>{const t={},n=(e,t)=>{for(const r in e)if(e.hasOwnProperty(r)){const o=e[r];void 0!==o.value&&(t[r]=o.value),o.child&&"object"==typeof o.child&&("object"==typeof t[r]&&null!==t[r]||(t[r]=o.value),n(o.child,t[r]))}};return n(e,t),t})(r)})(Object.keys(l).filter(e=>e.startsWith(p)),l);return c(a,d)}function d(e){return"function"==typeof RegExp.escape?RegExp.escape(e):e.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&")}function g(e,t,r){const o=l(n);return Array.from(f(e)).map(e=>{if(o.has(e))return o.get(e);const n=new r(e,t);return n.element=e,n.destroy=()=>{o.delete(e),y(e,"destroy")},o.set(e,n),n})}function h(e){const t=l(n);return Array.from(f(e)).filter(e=>t.has(e)).map(e=>t.get(e))}function y(e,t,n={},r={}){const o={bubbles:!1,cancelable:!0,composed:!1,...r};f(e).forEach(e=>e.dispatchEvent(new CustomEvent(t,{...o,detail:{...n}})))}function w(e,t,n={}){let r=!1,o=!1,s=0,i=0,a=!1;const c={offset:10,touchOnly:!1,...n},l=new AbortController,{signal:u}=l,f=e=>{if(r=!0,o=!1,s=e.x,i=e.y,a="touchstart"===e.type,"pointerdown"===e.type&&a)return!1;if(a){const{clientX:t,clientY:n}=e.changedTouches[0];s=t,i=n}},p=t=>{if(!r)return;if("pointermove"===t.type&&a)return!1;let n=t.x-s,l=t.y-i;if(a){const e=t.changedTouches[0];n=e.clientX-s,l=e.clientY-i}o=!0;const u={x:n,y:l,top:l+c.offset<0,bottom:l-c.offset>0,left:n+c.offset<0,right:n-c.offset>0,moving:!0,done:!1};y(e,"swipe",u)},d=t=>{if(!r)return;if(("pointerleave"===t.type||"pointerup"===t.type)&&a)return!1;let n=t.x-s,l=t.y-i;if(a){const{clientX:e,clientY:r}=t.changedTouches[0];n=e-s,l=r-i}if(o){const t={x:n,y:l,top:l+c.offset<0,bottom:l-c.offset>0,left:n+c.offset<0,right:n-c.offset>0,moving:!1,done:!0};y(e,"swipe",t)}o=!1,a=!1,r=!1};return e.addEventListener("touchstart",f,{passive:!0,signal:u}),e.addEventListener("touchmove",p,{passive:!0,signal:u}),e.addEventListener("touchend",d,{passive:!0,signal:u}),e.addEventListener("touchcancel",d,{signal:u}),c.touchOnly||(e.addEventListener("pointerdown",f,{signal:u}),e.addEventListener("pointermove",p,{signal:u}),e.addEventListener("pointerup",d,{signal:u}),e.addEventListener("pointerleave",d,{signal:u})),e.addEventListener("swipe",t,{signal:u}),()=>{l.abort()}}function m(e,t,n,r=[".","-","_"]){if(!t)return;if(Array.isArray(t)){const r=t.reduce((e,t)=>e&&e[t],e);return void 0===r?n:r}const o=(Array.isArray(r)?r:[r]).map(e=>d(e)).join(""),s=new RegExp(`([^[${o}\\]])+`,"g"),i=(t.match(s)||[]).reduce((e,t)=>e&&e[t],e);return void 0===i?n:i}function v(e){const t=a(e);return window.StorePress=window.StorePress||{},window.StorePress.$eventsMap=window.StorePress.$eventsMap||{},window.StorePress.$eventsMap[t]||(window.StorePress.$eventsMap[t]=new Map),window.StorePress.$eventsMap[t]}function $(e,t={prefix:"storepress",separator:":"}){const n=t.prefix.length>0?t.prefix:"$global",r=t.separator.length>0?t.separator:":",o=v(n),s=(t,s)=>{const i=u(t);if(void 0===o.get(e))throw new Error(`Namespace: "${e}" is not available in "${n}" event map.`);if(!o.get(e).has(i))return;const a=o.get(e).get(i);if(null===s){for(const[e,t]of Object.entries(a))t.abort();return void o.get(e).delete(i)}const c=`${n}${r}${e}${r}${s}`;for(const[e,t]of Object.entries(a))(e===c||e.startsWith(c))&&(t.abort(),delete a[e]);o.get(e).set(t,a)},i=t=>{const s=u(t);if(void 0===o.get(e))throw new Error(`Namespace: "${e}" is not available in "${n}" event map.`);if(!o.get(e).has(s))return[];const i=o.get(e).get(s),a=[];for(const[e]of Object.entries(i)){const t=e.split(r).at(-1),n=`on${t}`in s;a.push({eventType:e,isNative:n,nativeType:n?t:""})}return[...new Set(a)]};return{add:(t,s,i,a={})=>{f(t).forEach(t=>{((t,s,i,a={})=>{const c=u(t);o.has(e)||o.set(e,new Map),o.get(e).has(c)||o.get(e).set(c,{});const l=o.get(e).get(c),f=`${n}${r}${e}${r}${s}`;l[f]=new AbortController,o.get(e).set(c,l);const p=o.get(e).get(c)[f],d=f.split(r).at(-1),g=`on${d}`in c?d:f;c.addEventListener(g,i,{...a,signal:p.signal})})(t,s,i,a)})},trigger:(t,s=null,i={},a={})=>{const c=f(t);o.has(e)&&c.forEach(t=>{((t,s,i={},a={})=>{const c=((t,s)=>{if(!o.get(e).has(t))return[];const i=o.get(e).get(t),a=[],c=`${n}${r}${e}${r}${s}`;if(null===s){for(const[e]of Object.entries(i)){const n=e.split(r).at(-1),o=`on${n}`in t;a.push([e,o,n])}return a}for(const[e]of Object.entries(i))if(e===c||e.startsWith(c)){const n=e.split(r).at(-1),o=`on${n}`in t;a.push([e,o,n])}return a})(t,s),l=`${n}${r}${e}${r}${s}`;for(const[e,n,r]of c){const o=u(t);n&&l===e?o.dispatchEvent(new Event(r,{bubbles:!0,cancelable:!0})):y(o,e,i,a)}})(t,s,i,a)})},remove:(t,n=null)=>{o.has(e)&&f(t).forEach(e=>{s(e,n)})},removeAll:()=>{if(!o.has(e))return;const t=o.get(e);for(const[e]of[...t])s(e,null);o.delete(e)},get:t=>{if(!o.has(e))return[];const n=f(t),r=[];return n.forEach(e=>{r.push({$element:e,$events:i(e)})}),r},getAll:()=>{if(!o.has(e))return[];const t=o.get(e),n=[];for(const[e]of[...t])n.push({$element:e,$events:i(e)});return n}}}function b({selector:e,options:t={},plugin:n,namespace:r}){const s=$(o(r)),i="init",a="destroy",c="reload";return{get instance(){return{set:(e,t)=>g(e,t,n),get:e=>h(e),init(e,t){const n=this.set(e,t);if(n&&0!==n.length)for(const{element:e,reset:t}of n)e&&"function"==typeof t&&(e.removeEventListener("destroy",t,{passive:!0,once:!0}),e.addEventListener("destroy",t,{passive:!0,once:!0}))},destroy(e){const t=this.get(e);if(t&&0!==t.length)for(const{destroy:e}of t)"function"==typeof e&&e()},reload(e,t){this.destroy(e),this.init(e,t)}}},setup(){const e={passive:!0};s.add(document,i,e=>{const t={...e.detail?.settings},n=e.detail?.element;if(Array.isArray(n))for(const e of n)this.instance.init(e,t);else this.instance.init(n,t)},e),s.add(document,a,e=>{const t=e.detail?.element;if(Array.isArray(t))for(const e of t)this.instance.destroy(e);else this.instance.destroy(t)},e),s.add(document,c,e=>{const t={...e.detail?.settings},n=e.detail?.element;if(Array.isArray(n))for(const e of n)this.instance.reload(e,t);else this.instance.reload(n,t)},e)},clear(t=e){this.destroy(t),s.removeAll()},init(n=e,r=t){s.trigger(document,i,{element:n,settings:r})},destroy(t=e){s.trigger(document,a,{element:t})},reload(n=e,r=t){s.trigger(document,c,{element:n,settings:r})}}}function E(e,t={}){return new Promise(n=>setTimeout(()=>n(t),e))}function S(e,t={}){const n=Date.now();for(;Date.now()-n<e;);return t}(window.StorePress=window.StorePress||{}).Utils=t})();