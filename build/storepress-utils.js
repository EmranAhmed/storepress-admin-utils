(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(e){return e.replace(/([A-Z])/g,(e,t)=>`-${t.toLowerCase()}`).replace(/[-._:~\s]/g,"-").replace(/^-+|-+$/g,"").toLowerCase()}function r(e){return e.replace(/([A-Z])/g,(e,t)=>`_${t.toLowerCase()}`).replace(/[-._:~\s]/g,"_").replace(/^_+|_+$/g,"").toLowerCase()}function o(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/[-._:~\s]+/g,"_").replace(/^_+|_+$/g,"").toUpperCase()}function s(e){return e.replace(/^([a-z])|[-._:~\s](\w)/gi,(e,t,n)=>n?n.toUpperCase():t.toLowerCase())}function i(e){return"storepress"===e.toLowerCase()?"StorePress":e.replace(/^([a-z])|[-._:~\s](\w)/gi,(e,t,n)=>n?n.toUpperCase():t.toUpperCase())}function c(...e){const t={};for(const n of e)for(const e in n)if(n.hasOwnProperty(e)){const r="object"==typeof n[e]&&null!==n[e]&&!Array.isArray(n[e])&&"object"==typeof t[e]&&null!==t[e]&&!Array.isArray(t[e]);t[e]=r?c(t[e],n[e]):n[e]}return t}function a(e){const t=i(e);return window.StorePress=window.StorePress||{},window.StorePress.$Plugins=window.StorePress.$Plugins||{},window.StorePress.$Plugins[t]=window.StorePress.$Plugins[t]||{},window.StorePress.$Plugins[t].Instance||(window.StorePress.$Plugins[t].Instance=new WeakMap),window.StorePress.$Plugins[t].Instance}function l(e){const t=i(e);return window.StorePress=window.StorePress||{},window.StorePress.$Events=window.StorePress.$Events||{},window.StorePress.$Events[t]||(window.StorePress.$Events[t]=new Map),window.StorePress.$Events[t]}function u(e=null){return null===e?null:document===e?document:"string"==typeof e?document.querySelector(e):e instanceof HTMLElement?e:null}function g(e=[]){return 0===e.length?[]:e===document?[document]:"string"==typeof e?document.querySelectorAll(e):e instanceof HTMLElement?[e]:e}function f(e,t,n={}){const r={parseNumber:!0,parseBoolean:!0,truthyStrings:["yes","true"],falsyStrings:["no","false"],parseRegex:!0,...n},o=e=>{if("string"!=typeof e)return e;const t=e.toLowerCase(),n=!1===isNaN(Number(e)),o=new RegExp("^/(.+)/([gimsuyx]*)$").test(e);if(r.parseBoolean){if(r.truthyStrings.includes(t))return!0;if(r.falsyStrings.includes(t))return!1}if(r.parseRegex&&o){const t=e.match(/^\/(.+)\/([gimsuyx]*)$/);try{const[,e,n]=t;return new RegExp(e,n)}catch(t){return console.warn(`Invalid regex pattern: ${e}`,t),e}}return r.parseNumber&&n?Number(e):e},i=(e,t)=>o(t);let a={};const l={...e.dataset},u=s(t),g=l[u];if(g&&g.trim())try{a=((e,t)=>{const n=[e=>e.replaceAll("'",'"'),e=>e.replaceAll("'",'"').replaceAll("\\","\\\\")];for(const r of n)try{return JSON.parse(r(e),t)}catch{}throw new Error("All parsing strategies failed")})(g,i)}catch(e){console.warn(`Failed to parse JSON from "${t}"`,e),a={}}const f=`${u}-`,d=((e,t)=>{const n=e.map((e,t)=>({key:e,index:t})).sort((e,t)=>{const n=(e.key.match(/-/g)||[]).length,r=(t.key.match(/-/g)||[]).length;return n===r?e.index-t.index:n-r}).map(e=>e.key),r={};return n.forEach(e=>{const n=e.split("-");let i="",c="",a=r;n.forEach(e=>{c=c?c+"-"+e:e,c!==e&&(i=s(e),a[i]||(a[i]={value:o(t[c]),child:{}}),a=a[i].child)})}),(e=>{const t={},n=(e,t)=>{for(const r in e)if(e.hasOwnProperty(r)){const o=e[r];void 0!==o.value&&(t[r]=o.value),o.child&&"object"==typeof o.child&&("object"==typeof t[r]&&null!==t[r]||(t[r]=o.value),n(o.child,t[r]))}};return n(e,t),t})(r)})(Object.keys(l).filter(e=>e.startsWith(f)),l);return c(a,d)}function d(e){return"function"==typeof RegExp.escape?RegExp.escape(e):e.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&")}function p(e,t,n,r){const o=a(r);return Array.from(g(e)).map(e=>{if(o.has(e))return o.get(e);const r=new n(e,t);return r.element=e,r.destroy=()=>{h(e,"destroy"),o.delete(e)},o.set(e,r),r})}function w(e,t){const n=a(t);return Array.from(g(e)).filter(e=>n.has(e)).map(e=>n.get(e))}function h(e,t,n={},r={}){const o={bubbles:!1,cancelable:!0,composed:!1,...r};g(e).forEach(e=>e.dispatchEvent(new CustomEvent(t,{...o,detail:{...n}})))}function $(e,t,n={}){let r=!1,o=!1,s=0,i=0,c=!1;const a={offset:10,touchOnly:!1,...n},l=new AbortController,{signal:u}=l,g=e=>{if(r=!0,o=!1,s=e.x,i=e.y,c="touchstart"===e.type,"pointerdown"===e.type&&c)return!1;if(c){const{clientX:t,clientY:n}=e.changedTouches[0];s=t,i=n}},f=t=>{if(!r)return;if("pointermove"===t.type&&c)return!1;let n=t.x-s,l=t.y-i;if(c){const e=t.changedTouches[0];n=e.clientX-s,l=e.clientY-i}o=!0;const u={x:n,y:l,top:l+a.offset<0,bottom:l-a.offset>0,left:n+a.offset<0,right:n-a.offset>0,moving:!0,done:!1};h(e,"swipe",u)},d=t=>{if(!r)return;if(("pointerleave"===t.type||"pointerup"===t.type)&&c)return!1;let n=t.x-s,l=t.y-i;if(c){const{clientX:e,clientY:r}=t.changedTouches[0];n=e-s,l=r-i}if(o){const t={x:n,y:l,top:l+a.offset<0,bottom:l-a.offset>0,left:n+a.offset<0,right:n-a.offset>0,moving:!1,done:!0};h(e,"swipe",t)}o=!1,c=!1,r=!1};return e.addEventListener("touchstart",g,{passive:!0,signal:u}),e.addEventListener("touchmove",f,{passive:!0,signal:u}),e.addEventListener("touchend",d,{passive:!0,signal:u}),e.addEventListener("touchcancel",d,{signal:u}),a.touchOnly||(e.addEventListener("pointerdown",g,{signal:u}),e.addEventListener("pointermove",f,{signal:u}),e.addEventListener("pointerup",d,{signal:u}),e.addEventListener("pointerleave",d,{signal:u})),e.addEventListener("swipe",t,{signal:u}),()=>{l.abort()}}function y(e,t,n,r=[".","-","_"]){if(!t)return;if(Array.isArray(t)){const r=t.reduce((e,t)=>e&&e[t],e);return void 0===r?n:r}const o=(Array.isArray(r)?r:[r]).map(e=>d(e)).join(""),s=new RegExp(`([^[${o}\\]])+`,"g"),i=(t.match(s)||[]).reduce((e,t)=>e&&e[t],e);return void 0===i?n:i}function P(e,t={prefix:"storepress",separator:":"}){const n=t.prefix.length>0?t.prefix:"$global",r=t.separator.length>0?t.separator:":",o=l(n),s=(t,s)=>{const i=u(t);if(void 0===o.get(e))throw new Error(`Namespace: "${e}" is not available in "${n}" event map.`);if(!o.get(e).has(i))return;const c=o.get(e).get(i);if(null===s){for(const[e,t]of Object.entries(c))t.abort();return void o.get(e).delete(i)}const a=`${n}${r}${e}${r}${s}`;for(const[e,t]of Object.entries(c))(e===a||e.startsWith(a))&&(t.abort(),delete c[e]);o.get(e).set(t,c)},i=t=>{const s=u(t);if(void 0===o.get(e))throw new Error(`Namespace: "${e}" is not available in "${n}" event map.`);if(!o.get(e).has(s))return[];const i=o.get(e).get(s),c=[];for(const[e]of Object.entries(i)){const t=e.split(r).at(-1),n=`on${t}`in s;c.push({eventType:e,isNative:n,nativeType:n?t:""})}return[...new Set(c)]};return{add:(t,s,i,c={})=>{g(t).forEach(t=>{((t,s,i,c={})=>{const a=u(t);o.has(e)||o.set(e,new Map),o.get(e).has(a)||o.get(e).set(a,{});const l=o.get(e).get(a),g=`${n}${r}${e}${r}${s}`;l[g]=new AbortController,o.get(e).set(a,l);const f=o.get(e).get(a)[g],d=g.split(r).at(-1),p=`on${d}`in a?d:g;a.addEventListener(p,i,{...c,signal:f.signal})})(t,s,i,c)})},trigger:(t,s=null,i={},c={})=>{const a=g(t);o.has(e)&&a.forEach(t=>{((t,s,i={},c={})=>{const a=((t,s)=>{if(!o.get(e).has(t))return[];const i=o.get(e).get(t),c=[],a=`${n}${r}${e}${r}${s}`;if(null===s){for(const[e]of Object.entries(i)){const n=e.split(r).at(-1),o=`on${n}`in t;c.push([e,o,n])}return c}for(const[e]of Object.entries(i))if(e===a||e.startsWith(a)){const n=e.split(r).at(-1),o=`on${n}`in t;c.push([e,o,n])}return c})(t,s),l=`${n}${r}${e}${r}${s}`;for(const[e,n,r]of a){const o=u(t);n&&l===e?o.dispatchEvent(new Event(r,{bubbles:!0,cancelable:!0})):h(o,e,i,c)}})(t,s,i,c)})},remove:(t,n=null)=>{o.has(e)&&g(t).forEach(e=>{s(e,n)})},removeAll:()=>{if(!o.has(e))return;const t=o.get(e);for(const[e]of[...t])s(e,null);o.delete(e)},get:t=>{if(!o.has(e))return[];const n=g(t),r=[];return n.forEach(e=>{r.push({$element:e,$events:i(e)})}),r},getAll:()=>{if(!o.has(e))return[];const t=o.get(e),n=[];for(const[e]of[...t])n.push({$element:e,$events:i(e)});return n}}}function v({selector:e,options:t={},plugin:n,namespace:o,callback:s={onSetup:()=>{},onClear:()=>{}}}){const i="init",a="destroy",l="reload";return{$event:null,$controller:null,get instance(){return{init(e,t){const r=p(e,t,n,o);if(r&&0!==r.length)for(const{element:e,reset:t}of r)e&&"function"==typeof t&&(e.removeEventListener("destroy",t,{passive:!0,once:!0}),e.addEventListener("destroy",t,{passive:!0,once:!0}))},destroy(e){const t=w(e,o);if(t&&0!==t.length)for(const{destroy:e}of t)"function"==typeof e&&e()},reload(e,t){this.destroy(e),this.init(e,t)}}},get controller(){return this.$controller},get(e=this.config.selector){return w(e,o)},setup({selector:n,options:u,callback:g}={selector:e,options:t,callback:s}){this.config={selector:n||e,options:c(t,u),callback:c({onSetup:()=>{},onClear:()=>{}},s,g)},this.$event=P(r(o)),this.$controller=new AbortController,this.$event.removeAll();const f={passive:!0};this.$event.add(document,i,e=>{const t={...e.detail?.settings},n=e.detail?.element;if(Array.isArray(n))for(const e of n)this.instance.init(e,t);else this.instance.init(n,t)},f),this.$event.add(document,a,e=>{const t=e.detail?.element;if(Array.isArray(t))for(const e of t)this.instance.destroy(e);else this.instance.destroy(t)},f),this.$event.add(document,l,e=>{const t={...e.detail?.settings},n=e.detail?.element;if(Array.isArray(n))for(const e of n)this.instance.reload(e,t);else this.instance.reload(n,t)},f),this.config.callback.onSetup.call(this)},clear(e=this.config.selector){this.destroy(e),this.$event.removeAll(),this.controller.abort(),this.config.callback.onClear.call(this)},init(e=this.config.selector,t=this.config.options){this.$event.trigger(document,i,{element:e,settings:t})},destroy(e=this.config.selector){this.$event.trigger(document,a,{element:e})},reload(e=this.config.selector,t=this.config.options){this.$event.trigger(document,l,{element:e,settings:t})}}}function m(e){const t=i(e);return window.StorePress=window.StorePress||{},window.StorePress.$Plugins=window.StorePress.$Plugins||{},window.StorePress.$Plugins[t]=window.StorePress.$Plugins[t]||{},window.StorePress.$Plugins[t].Plugin||(window.StorePress.$Plugins[t].Plugin={}),window.StorePress.$Plugins[t].Plugin}function S({selector:e,options:t={},plugin:n,namespace:r,callback:o={onSetup:()=>{},onClear:()=>{}}}){const s=v({selector:e,options:t,plugin:n,namespace:r,callback:o}),c=i(r);return window.StorePress=window.StorePress||{},window.StorePress.$Plugins=window.StorePress.$Plugins||{},window.StorePress.$Plugins[c]=window.StorePress.$Plugins[c]||{},window.StorePress.$Plugins[c].Plugin||(window.StorePress.$Plugins[c].Plugin={}),window.StorePress.$Plugins[c].Plugin=s,s}function b(e,t={}){return new Promise(n=>setTimeout(()=>n(t),e))}function E(e,t={}){const n=Date.now();for(;Date.now()-n<e;);return t}e.r(t),e.d(t,{createEventManager:()=>P,createPlugin:()=>v,createPluginInstance:()=>p,createStorePressPlugin:()=>S,deepMerge:()=>c,escapeRegex:()=>d,findObjectValue:()=>y,getElement:()=>u,getElements:()=>g,getEventStore:()=>l,getOptionsFromAttribute:()=>f,getPluginInstance:()=>w,getPluginInstanceStore:()=>a,getStorePressPlugin:()=>m,swipeEvent:()=>$,testWaitAsync:()=>b,testWaitSync:()=>E,toCamelCase:()=>s,toConstantCase:()=>o,toKebabCase:()=>n,toSnakeCase:()=>r,toUpperCamelCase:()=>i,triggerEvent:()=>h}),(window.StorePress=window.StorePress||{}).Utils=t})();